{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","services_persons","axios","get","then","response","data","person","console","log","name","number","promise","post","id","delete","concat","put","Notification","_ref","notification","message","style","color","type","background","fontSize","borderStyle","borderRadius","padding","marginBottom","react_default","a","createElement","Filter","props","onChange","handleChange","value","Persons","persons","map","p","key","onClick","deletePerson","PersonForm","onSubmit","handleSubmit","handleNameChange","newName","handleNumberChange","newNumber","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","setNewName","_useState5","_useState6","setNewNumber","_useState7","_useState8","filter","setFilter","_useState9","_useState10","setNotification","useEffect","personService","notify","arguments","length","undefined","setTimeout","personsToShow","toLowerCase","includes","App_Notification","App_Filter","event","target","App_PersonForm","preventDefault","existingPerson","find","window","confirm","objectSpread","replacedPerson","createdPerson","catch","error","errorMessage","App_Persons","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.6cee042e.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\nconst baseUrl = 'http://localhost:3001/api/persons'\r\n\r\nconst getAll = () => {\r\n  \r\n  const promise = axios.get(baseUrl)\r\n\r\n  return promise.then(response => response.data)\r\n}\r\n\r\nconst create = (person) => {\r\n  console.log(baseUrl)\r\n  console.log(person.name)\r\n  console.log(person.number)\r\n  \r\n  const promise = axios.post(baseUrl, person)\r\nconsole.log('Data was send')\r\n  return promise.then(response => response.data)\r\n}\r\n\r\nconst remove = (id) => {\r\n  const promise = axios.delete(`${baseUrl}/${id}`)\r\n\r\n  return promise.then(response => response.data)\r\n}\r\n\r\nconst replace = (person) => {\r\n  const promise = axios.put(`${baseUrl}/${person.id}`, person)\r\n\r\n  return promise.then(response => response.data)\r\n}\r\n\r\nexport default {\r\n  getAll, create, remove, replace\r\n}","import React, { useState, useEffect } from 'react'\nimport personService from './services/persons'\n\nconst Notification = ({ notification }) => {\n  if (notification.message === null) {\n    return null\n  }\n\n  const style = {\n    color: notification.type === 'error' ? 'red' : 'green',\n    background: 'lightgrey',\n    fontSize: 20,\n    borderStyle: 'solid',\n    borderRadius: 5,\n    padding: 10,\n    marginBottom: 10,\n  }\n\n  return (\n    <div style={style}>\n      {notification.message}\n    </div>\n  )\n}\n\nconst Filter = (props) => {\n  return (\n    <div>\n      rajaa näytettäviä\n      <input onChange={props.handleChange} value={props.value} />\n    </div>\n  )\n}\n\nconst Persons = (props) => {\n  return (\n    props.persons.map(p =>\n      <div key={p.name}>\n        {p.name} {p.number} <button onClick={()=>props.deletePerson(p.id)}>poista</button>\n      </div>\n    )\n  )\n}\n\nconst PersonForm = (props) => {\n  return (\n    <form onSubmit={props.handleSubmit}>\n      <div>\n        nimi: <input onChange={props.handleNameChange} value={props.newName} />\n      </div>\n      <div>\n        numero: <input onChange={props.handleNumberChange} value={props.newNumber} />\n      </div>\n      <div>\n        <button type=\"submit\">lisää</button>\n      </div>\n    </form>\n  )\n}\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [filter, setFilter] = useState('')\n  const [notification, setNotification] = useState({\n    message: null\n  })\n\n  useEffect(() => {\n    personService.getAll()\n      .then(data => {\n        setPersons(data)\n      })\n  }, [])\n\n  const handleNameChange = (event) => setNewName(event.target.value)\n  const handleNumberChange = (event) => setNewNumber(event.target.value)\n  const handleFilterChange = (event) => setFilter(event.target.value)\n\n  const notify = (message, type='success') => {\n    setNotification({ message, type })\n    setTimeout(() => setNotification({ message: null }), 10000)\n  }\n \n  const handleSubmit = (event) => {\n    event.preventDefault()\n\n    const existingPerson = persons.find(p => p.name === newName)\n\n    if (existingPerson) {\n      const ok = window.confirm(`${newName} on jo luettelossa, korvataanko vanha numero uudella`)\n      \n\n      \n      if (ok) {\n        personService\n          .replace({\n            ...existingPerson,\n            number: newNumber\n          })\n          .then(replacedPerson => {\n            setPersons(persons.map(p => p.name === newName ? replacedPerson : p))\n            setNewName('')\n            setNewNumber('')\n            notify(`Henkilön ${newName} numero muutettu`)\n          })\n          /*\n          .catch(() => {\n            setPersons(persons.filter(p => p.name !== newName))\n            notify(`Henkilön ${newName} oli jo poistettu`, 'error')\n          })\n          */\n      }\n\n      return\n    } \n     \n  personService\n      .create({\n        name: newName,\n        number: newNumber\n      })\n      .then(createdPerson => {\n        setPersons(persons.concat(createdPerson))\n        setNewName('')\n        setNewNumber('')\n        notify(`Lisättiin ${createdPerson.name}`)\n      })\n      .catch(error=>{\n        console.log(error.response.data)\n        var errorMessage=error.response.data\n        \n        notify(errorMessage, 'error')\n      })\n  }\n\n  const deletePerson = (id) => {\n    const person = persons.find(p => p.id === id)\n    const ok = window.confirm(`Poistetaanko ${person.name}`)\n    if (ok) {\n      personService\n        .remove(id)\n        .then(() => {\n          setPersons(persons.filter(p => p.id !== id))\n        })\n      notify(`Poistettiin ${person.name}`)\n    }\n  }\n\n  const personsToShow = filter.length === 0\n    ? persons \n    : persons.filter(p => p.name.toLowerCase().includes(filter.toLowerCase()) )\n\n  return (\n    <div>\n      <h2>Puhelinluettelo</h2>\n\n      <Notification notification={notification} />\n\n      <Filter handleChange={handleFilterChange} value={filter} />\n\n      <h3>lisää uusi</h3>\n\n      <PersonForm \n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n        handleSubmit={handleSubmit}\n        newName={newName}\n        newNumber={newNumber}\n      />\n\n      <h3>Numerot</h3>\n\n      <Persons persons={personsToShow} deletePerson={deletePerson} />\n    </div>\n  )\n\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(\n  <App  />,\n  document.getElementById('root')\n)"],"sourceRoot":""}